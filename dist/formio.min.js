!function(){"use strict";var app=angular.module("formio",["ngSanitize","ui.bootstrap","ui.bootstrap.datetimepicker","ui.select","angularMoment","bgf.paginateAnything"]);app.provider("Formio",function(){var e,t="",o=!1,n={},i=function(e){return e.match(/^(http[s]?:\/\/)([^/]+)($|\/.*)/)};return{setBaseUrl:function(e,n){o=n,t=e},setDomain:function(t){e=t},$get:["$http","$q","formioInterceptor","$location","$rootScope",function(r,a,s,l,c){var m=function(n){if(!(this instanceof m))return new m(n);if(!n)return this.projectUrl=t+"/project",this.projectId=!1,void(this.query="");this.projectUrl="",this.projectId="",this.formUrl="",this.formsUrl="",this.formId="",this.submissionsUrl="",this.submissionUrl="",this.submissionId="",this.actionsUrl="",this.actionId="",this.actionUrl="",this.query="",0!==n.indexOf("http")&&0!==n.indexOf("//")&&(t=t?t:l.absUrl().match(/http[s]?:\/\/api./)[0],n=t+n);var r=i(n),a=[],s="";if(e){if(r.length>2){var c=r[2].indexOf(e);0!==c&&c--,a=a.concat(r[2].substring(0,c).split(".")),a=a.concat(e)}!o&&a.length>=2&&(s=a[0],this.projectId=s)}else a=r.length>2?r[2].split("."):[],!o&&(2===a.length&&0===a[1].indexOf("localhost")||a.length>=3)&&(s=a[0],this.projectId=s);var p=n.match(/\/(submission|action)\/?([^?]*)/);p&&p.length>1&&p.shift();var u=[],d=n.split("?");if(this.query=d.length>1?"?"+d[1]:"",n=d[0].replace(/\/(submission|action)($|\/.*)/,""),n=n.replace(/\/$/,""),s&&"api"!==s)u=n.match(/(http[s]?:\/\/?.*\..*?)\/([^?]*)?/),u&&u.length>1&&u.shift();else{var f=n.match(/^http.*\/.*\/form\/?([^?]*)/);f&&f.length>1?(u[1]=f[1]?"form/"+f[1]:"",u[0]=u[1]?n.replace("/"+u[1],""):n):u[0]=n}u.length>0&&(this.projectUrl=u[0],this.projectId=!0,this.formsUrl=this.projectUrl?this.projectUrl+"/form":"",this.formId=u.length>1?u[1]:"",this.formUrl=this.projectUrl?this.projectUrl+"/"+this.formId:"",this.pathType=p&&p.length>0?p[0]:"",angular.forEach(["submission","action"],function(e){var t=e+"sUrl",o=e+"Id",n=e+"Url";this[t]=this.formUrl?this.formUrl+"/"+e:"",this[o]=p&&this.pathType===e&&p.length>1?p[1]:"",this[n]=this[o]?this[t]+"/"+this[o]:this[t]}.bind(this)))},p=function(e){return function(t){"Unauthorized"===t?c.$broadcast("formio.unauthorized",t):"Login Timeout"===t&&c.$broadcast("formio.sessionExpired",t),e.reject(t)}},u=function(e,t){var o=a.defer();if(!e)return o.promise;var i=e;if(i+=t?angular.toJson(t):"",i=btoa(i),n.hasOwnProperty(i))return n[i];n[i]=o.promise;try{r.get(e,t).success(o.resolve).error(p(o))}catch(s){o.reject(s.message)}return o.promise},d=function(e){var t=e+"Id",o=e+"Url";return function(e){return this[t]?u(this[o]+this.query,e):a.defer().promise}},f=function(e){var t=e+"Id",o=e+"Url";return function(e){var i=a.defer();if(!this[o])return i.promise;var s=this[t]?"put":"post";return r[s](this[o]+this.query,e).success(function(e){n={},e.method=s,i.resolve(e)}).error(p(i)),i.promise}},h=function(e){var t=e+"Id",o=e+"Url";return function(){var e=a.defer();return this[t]?(n={},r["delete"](this[o]).success(e.resolve).error(p(e)),e.promise):e.promise}},g=function(e){var t=e+"sUrl";return function(e){return u(this[t],e)}};return m.prototype.loadProject=d("project"),m.prototype.saveProject=f("project"),m.prototype.deleteProject=h("project"),m.prototype.loadForm=d("form"),m.prototype.saveForm=f("form"),m.prototype.deleteForm=h("form"),m.prototype.loadForms=g("form"),m.prototype.loadSubmission=d("submission"),m.prototype.saveSubmission=f("submission"),m.prototype.deleteSubmission=h("submission"),m.prototype.loadSubmissions=g("submission"),m.prototype.loadAction=d("action"),m.prototype.saveAction=f("action"),m.prototype.deleteAction=h("action"),m.prototype.loadActions=g("action"),m.prototype.availableActions=function(){return u(this.formUrl+"/actions")},m.loadProjects=function(){return u(t+"/project")},m.clearCache=function(){n={}},m.baseUrl=t,m.setUser=s.setUser.bind(s),m.getUser=s.getUser.bind(s),m.setToken=s.setToken.bind(s),m.getToken=s.getToken.bind(s),m.currentUser=function(){var e=a.defer(),o=this.getUser();if(o)return e.resolve(angular.fromJson(o)),e.promise;var n=this.getToken();return n?(r.get(t+"/current").success(function(t){this.setUser(t),e.resolve(t)}.bind(this)).error(p(e)),e.promise):(e.resolve(null),e.promise)},m.logout=function(){return r.get(t+"/logout")["finally"](function(){this.setToken(null),this.setUser(null)}.bind(this))},m.fieldData=function(e,t){if(!e)return"";if(-1!==t.key.indexOf(".")){for(var o=e,n=t.key.split("."),i="",r=0;r<n.length;r++){if(i=n[r],o.hasOwnProperty("_id")&&(o=o.data),!o.hasOwnProperty(i))return;i===n[n.length-1]&&t.multiple&&!Array.isArray(o[i])&&(o[i]=[o[i]]),o=o[i]}return o}return t.multiple&&!Array.isArray(e[t.key])&&(e[t.key]=[e[t.key]]),e[t.key]},m}]}}),app.factory("FormioScope",["Formio","formioComponents",function(e,t){return{onError:function(e,t){return function(o){if("ValidationError"===o.name){t.find("#form-group-"+o.details[0].path).addClass("has-error");var n="ValidationError: "+o.details[0].message;e.showAlerts({type:"danger",message:n})}else e.showAlerts({type:"danger",message:o});e.$emit("formError",o)}},register:function(o,n,i){var r=null;o._form=o.form||{},o._submission=o.submission||{data:{}},o._submissions=o.submissions||[];var a=function(t){return t?o.action?"":("/"===t.substr(0,1)&&(t=e.baseUrl+t),t):""};o.action=a(o.formAction);var s={};o.$on("addFormComponent",function(e,n){if(!s.hasOwnProperty(n.settings.key)){s[n.settings.key]=!0;var i=t.components[n.type];o._form.components.push(angular.extend(i.settings,n.settings))}}),o.$watch("form.action",function(e){if(e){var t=a(e);t&&(o.action=t)}}),o.fieldData=function(o,n){var i=e.fieldData(o,n),r=t.components[n.type];if(!r.tableView)return i;if(n.multiple&&i.length>0){var a=[];return angular.forEach(i,function(e){a.push(r.tableView(e,n))}),a}return r.tableView(i,n)};var l=n.find("#formio-loading");return o.src?(r=new e(o.src),i.form&&(l.show(),r.loadForm().then(function(e){o._form=e,l.hide(),o.$emit("formLoad",e)},this.onError(o))),i.submission&&(l.show(),r.loadSubmission().then(function(e){o._submission=e,o._submission.data||(o._submission.data={}),l.hide(),o.$emit("submissionLoad",e)},this.onError(o))),i.submissions&&(l.show(),r.loadSubmissions().then(function(e){o._submissions=e,l.hide(),o.$emit("submissionsLoad",e)},this.onError(o)))):(o.formoLoaded=!0,l.hide(),o._form&&o.$emit("formLoad",o._form),o._submission&&o.$emit("submissionLoad",o._submission),o._submissions&&o.$emit("submissionsLoad",o._submissions)),r}}}]),app.factory("FormioUtils",function(){return{flattenComponents:function e(t,o){return o=o||{},angular.forEach(t,function(t){t.tree?o[t.key]=t:t.columns&&t.columns.length>0?angular.forEach(t.columns,function(t){e(t.components,o)}):t.components&&t.components.length>0?e(t.components,o):t.input&&(o[t.key]=t)}),o},eachComponent:function t(e,o){e&&angular.forEach(e,function(e){e.columns?angular.forEach(e.columns,function(e){t(e.components,o)}):e.components?t(e.components,o):o(e)})},fieldWrap:function(e){e+="<formio-errors></formio-errors>";var t=e.replace("data[component.key]","data[component.key][$index]"),o='<label ng-if="component.label && !component.hideLabel" for="{{ component.key }}" class="control-label" ng-class="{\'field-required\': component.validate.required}">{{ component.label }}</label>',n='<span ng-if="!component.label && component.validate.required" class="glyphicon glyphicon-asterisk form-control-feedback field-required-inline" aria-hidden="true"></span>',i='<div ng-if="!component.multiple">'+o+n+'<div class="input-group" ng-if="component.prefix || component.suffix"><div class="input-group-addon" ng-if="!!component.prefix">{{ component.prefix }}</div>'+e+'<div class="input-group-addon" ng-if="!!component.suffix">{{ component.suffix }}</div></div><div ng-if="!component.prefix && !component.suffix">'+e+'</div></div><div ng-if="component.multiple"><table class="table table-bordered">'+o+'<tr ng-repeat="value in data[component.key] track by $index"><td>'+n+'<div class="input-group" ng-if="component.prefix || component.suffix"><div class="input-group-addon" ng-if="!!component.prefix">{{ component.prefix }}</div>'+t+'<div class="input-group-addon" ng-if="!!component.suffix">{{ component.suffix }}</div></div><div ng-if="!component.prefix && !component.suffix">'+t+'</div></td><td><a ng-click="removeFieldValue($index)" class="btn btn-danger"><span class="glyphicon glyphicon-remove-circle"></span></a></td></tr><tr><td colspan="2"><a ng-click="addFieldValue()" class="btn btn-primary"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add another</a></td></tr></table></div>';return i}}}),app.directive("formio",function(){return{restrict:"E",replace:!0,scope:{src:"=",formAction:"=",form:"=",submission:"=",readOnly:"="},controller:["$scope","$http","$element","FormioScope","Formio","FormioUtils","formioComponents",function(e,t,o,n,i,r,a){e.formioAlerts=[],e.showAlerts=function(t){e.formioAlerts=[].concat(t)},e.src&&-1===e.src.indexOf("live=")&&(e.src+=-1===e.src.indexOf("?")?"?":"&",e.src+="live=1"),e.formio=n.register(e,o,{form:!0,submission:!0}),e.componentFound=function(e){return a.components.hasOwnProperty(e.type)},e.onSubmit=function(a){if(e.formioForm.$valid&&!a.submitting){a.submitting=!0;var s={data:{}};e._submission._id&&(s._id=e._submission._id),e._submission.data._id&&(s._id=e._submission.data._id);var l=r.flattenComponents(e._form.components);angular.forEach(l,function(t){e._submission.data.hasOwnProperty(t.key)&&(s.data[t.key]=e._submission.data[t.key])}),angular.forEach(e._submission.data,function(e,t){e&&!e.hasOwnProperty("_id")&&(s.data[t]=e)});var c=function(t,o){e.showAlerts({type:"success",message:"Submission was "+("put"===t?"updated":"created")+"."}),a.submitting=!1,e.$emit("formSubmission",o)};if(e.action){var m=s._id?"put":"post";t[m](e.action,s).success(function(e){i.clearCache(),c(m,e)}).error(n.onError(e,o))["finally"](function(){a.submitting=!1})}else e.formio?e.formio.saveSubmission(s).then(function(e){c(e.method,e)},n.onError(e,o))["finally"](function(){a.submitting=!1}):e.$emit("formSubmission",s)}}}],templateUrl:"formio.html"}}),app.directive("formioDelete",function(){return{restrict:"E",replace:!0,scope:{form:"=",submission:"=",src:"=",formAction:"=",resourceName:"="},templateUrl:"formio-delete.html",controller:["$scope","$element","FormioScope","Formio","$http",function(e,t,o,n,i){e.formioAlerts=[],e.showAlerts=function(t){e.formioAlerts=[].concat(t)};var r="resource",a="",s=o.register(e,t,{form:!0,submission:!0});if(s){r=s.submissionId?"submission":"form";var l=r.charAt(0).toUpperCase()+r.slice(1);a="delete"+l}e._resourceName=r,e.onDelete=function(){var r=e.resourceName||e._resourceName,l=r.charAt(0).toUpperCase()+r.slice(1),c=function(t){e.showAlerts({type:"success",message:l+" was deleted."}),n.clearCache(),e.$emit("delete",t)};if(e.action)i["delete"](e.action).success(c).error(o.onError(e,t));else if(s){if(!a)return;if("function"!=typeof s[a])return;s[a]().then(c,o.onError(e,t))}},e.onCancel=function(){e.$emit("cancel")}}]}}),app.filter("flattenComponents",["FormioUtils",function(e){return e.flattenComponents}]),app.filter("safehtml",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),app.directive("formioErrors",function(){return{scope:!1,restrict:"E",templateUrl:"formio/errors.html"}}),app.directive("customValidator",function(){return{restrict:"A",require:"ngModel",link:function(scope,ele,attrs,ctrl){scope.component.validate&&scope.component.validate.custom&&ctrl.$parsers.unshift(function(input){var valid=!0;if(input){var custom=scope.component.validate.custom;custom=custom.replace(/({{\s+(.*)\s+}})/,function(e,t,o){return scope.data[o]}),valid=eval(custom),ctrl.$setValidity("custom",valid===!0)}return valid!==!0&&(scope.component.customError=valid),valid===!0?input:valid})}}}),app.directive("formioSubmissions",function(){return{replace:!0,restrict:"E",scope:{src:"=",form:"=",submissions:"=",perPage:"="},templateUrl:"formio/submissions.html",controller:["$scope","$element","FormioScope",function(e,t,o){e.formio=o.register(e,t,{form:!0,submissions:!1}),e.tableView=function(e){return!e.hasOwnProperty("tableView")||e.tableView},e.$watch("_submissions",function(t){t&&t.length>0&&e.$emit("submissionLoad",e._submissions)})}]}}),app.directive("formioComponent",["Formio","formioComponents",function(e,t){return{replace:!0,restrict:"E",scope:{component:"=",data:"=",formio:"=",form:"=",readOnly:"="},templateUrl:"formio/component.html",controller:["$scope","$http",function(o,n){if(o.resetForm=function(){for(var e in o.data)delete o.data[e]},o.data||o.resetForm(),o.component&&o.component.key){var i="";-1!==o.component.key.indexOf(".")&&(i=o.component.key.split(".").shift()),o.$watch("data",function(t){if(t&&!angular.equals({},t)&&(!i||t.hasOwnProperty(i)&&!angular.equals({},t[i]))){i&&t[i].hasOwnProperty("_id")&&(o.data[i+"._id"]=t[i]._id);var n=e.fieldData(t,o.component);void 0!==n&&(o.data[o.component.key]=n)}})}o.componentFound=function(e){return t.components.hasOwnProperty(e.type)};var r=t.components[o.component.type];if(r){if(angular.forEach(r.settings,function(e,t){o.component.hasOwnProperty(t)||(o.component[t]=e)}),o.addFieldValue=function(){o.data[o.component.key]=o.data[o.component.key]||[],o.data[o.component.key].push("")},o.removeFieldValue=function(e){o.data[o.component.key].splice(e,1)},"function"==typeof r.template?o.template=r.template(o):o.template=r.template,o.component.key&&-1!==o.component.key.indexOf("[")){var a=o.component.key.match(/([^\[]+)\[([^]+)\]/);3===a.length&&o.data.hasOwnProperty(a[1])&&(o.data=o.data[a[1]],o.component.key=a[2])}r.controller&&r.controller(o.component,o,n,e),o.data&&!o.data.hasOwnProperty(o.component.key)&&o.component.hasOwnProperty("defaultValue")&&(o.component.multiple&&!angular.isArray(o.component.defaultValue)?o.data[o.component.key]=[o.component.defaultValue]:o.data[o.component.key]=o.component.defaultValue)}}]}}]),app.directive("formioElement",["$compile","$templateCache",function(e,t){return{scope:!1,link:function(o,n){n.replaceWith(e(t.get(o.template))(o))},controller:function(){}}}]),app.directive("formioInputMask",function(){return{restrict:"A",link:function(e,t,o){o.formioInputMask&&t.mask(o.formioInputMask)}}}),app.factory("formioInterceptor",["$q",function(e){var t={token:"",setToken:function(e){return e=e||"",e!==this.token?(this.token=e,e?void localStorage.setItem("formioToken",e):(this.setUser(null),localStorage.removeItem("formioToken"))):void 0},getToken:function(){if(this.token)return this.token;var e=localStorage.getItem("formioToken")||"";return this.token=e,e},setUser:function(e){return e?void localStorage.setItem("formioUser",angular.toJson(e)):(this.setToken(null),localStorage.removeItem("formioUser"))},getUser:function(){return localStorage.getItem("formioUser")}};return t.response=function(e){var t=parseInt(e.status,10),o=e.headers("x-jwt-token");return 200===t&&o&&""!==o?this.setToken(o):204===t&&o&&""===o&&this.setToken(o),e}.bind(t),t.responseError=function(t){return 440===parseInt(t.status,10)&&(t.loggedOut=!0,this.setToken(null)),e.reject(t)}.bind(t),t.request=function(e){if(e.disableJWT)return e;var t=this.getToken();return t&&(e.headers["x-jwt-token"]=t),e}.bind(t),t}]),app.config(["$httpProvider",function(e){e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache",e.interceptors.push("formioInterceptor")}]),app.run(["$templateCache",function(e){e.put("formio.html",'<form role="form" name="formioForm" ng-submit="onSubmit(formioForm)" novalidate><i id="formio-loading" style="font-size: 2em;" class="glyphicon glyphicon-refresh glyphicon-spin"></i><div ng-repeat="alert in formioAlerts" class="alert alert-{{ alert.type }}" role="alert">{{ alert.message }}</div><formio-component ng-repeat="component in _form.components track by $index" ng-if="componentFound(component)" component="component" data="_submission.data" form="formioForm" formio="formio" read-only="readOnly"></formio-component></form>'),e.put("formio-delete.html",'<form role="form"><div ng-repeat="alert in formioAlerts" class="alert alert-{{ alert.type }}" role="alert">{{ alert.message }}</div><h3>Are you sure you wish to delete the {{ resourceName || _resourceName }}?</h3><div class="btn-toolbar"><button ng-click="onDelete()" class="btn btn-danger">Yes</button><button ng-click="onCancel()" class="btn btn-default">No</button></div></form>'),e.put("formio/pager.html",'<div class="paginate-anything"><ul class="pagination pagination-{{size}} links" ng-if="numPages > 1"><li ng-class="{disabled: page <= 0}"><a href ng-click="gotoPage(page-1)">&laquo;</a></li><li ng-if="linkGroupFirst() > 0"><a href ng-click="gotoPage(0)">1</a></li><li ng-if="linkGroupFirst() > 1" class="disabled"><a href>&hellip;</a></li><li ng-repeat="p in [linkGroupFirst(), linkGroupLast()] | makeRange" ng-class="{active: p === page}"><a href ng-click="gotoPage(p)">{{p+1}}</a></li><li ng-if="linkGroupLast() < numPages - 2" class="disabled"><a href>&hellip;</a></li><li ng-if="isFinite() && linkGroupLast() < numPages - 1"><a href ng-click="gotoPage(numPages-1)">{{numPages}}</a></li><li ng-class="{disabled: page >= numPages - 1}"><a href ng-click="gotoPage(page+1)">&raquo;</a></li></ul></div>'),e.put("formio/submissions.html",'<div><table class="table"><thead><tr><th ng-repeat="component in _form.components | flattenComponents" ng-if="tableView(component)">{{ component.label || component.key }}</th><th>Submitted</th><th>Updated</th><th>Operations</th></tr></thead><tbody><tr ng-repeat="submission in _submissions"><td ng-repeat="component in _form.components | flattenComponents" ng-if="tableView(component)">{{ fieldData(submission.data, component) }}</td><td>{{ submission.created | amDateFormat:\'l, h:mm:ss a\' }}</td><td>{{ submission.modified | amDateFormat:\'l, h:mm:ss a\' }}</td><td><div class="button-group" style="display:flex;"><a ng-click="$emit(\'submissionView\', submission)" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-eye-open"></span></a>&nbsp;<a ng-click="$emit(\'submissionEdit\', submission)" class="btn btn-default btn-xs"><span class="glyphicon glyphicon-edit"></span></a>&nbsp;<a ng-click="$emit(\'submissionDelete\', submission)" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove-circle"></span></a></div></td></tr></tbody></table><bgf-pagination collection="_submissions" url="formio.submissionsUrl" per-page="perPage" template-url="formio/pager.html"></bgf-pagination></div>'),e.put("formio/component.html",'<ng-form name="formioFieldForm"><div class="form-group has-feedback form-field-type-{{ component.type }}" id="form-group-{{ component.key }}" ng-class="{\'has-error\': formioFieldForm[component.key].$invalid && !formioFieldForm[component.key].$pristine }"><formio-element></formio-element></div></ng-form>'),e.put("formio/errors.html",'<div ng-show="formioFieldForm[component.key].$error && !formioFieldForm[component.key].$pristine"><p class="help-block" ng-show="formioFieldForm[component.key].$error.email">{{ component.label || component.key }} must be a valid email.</p><p class="help-block" ng-show="formioFieldForm[component.key].$error.required">{{ component.label || component.key }} is required.</p><p class="help-block" ng-show="formioFieldForm[component.key].$error.number">{{ component.label || component.key }} must be a number.</p><p class="help-block" ng-show="formioFieldForm[component.key].$error.maxlength">{{ component.label || component.key }} must be shorter than {{ component.validate.maxLength + 1 }} characters.</p><p class="help-block" ng-show="formioFieldForm[component.key].$error.minlength">{{ component.label || component.key }} must be longer than {{ component.validate.minLength - 1 }} characters.</p><p class="help-block" ng-show="formioFieldForm[component.key].$error.min">{{ component.label || component.key }} must be higher than {{ component.validate.min - 1 }}.</p><p class="help-block" ng-show="formioFieldForm[component.key].$error.max">{{ component.label || component.key }} must be lower than {{ component.validate.max + 1 }}.</p><p class="help-block" ng-show="formioFieldForm[component.key].$error.custom">{{ component.customError }}</p></div>')}]),app.provider("formioComponents",function(){var e={},t={__component:{title:"Form Components"},layout:{title:"Layout Components"}};return{addGroup:function(e,o){t[e]=o},register:function(t,o,n){e[t]?angular.extend(e[t],o):e[t]=o,e[t].group||(e[t].group=n||"__component"),e[t].settings.type=t},$get:function(){return{components:e,groups:t}}}}),app.directive("safeMultipleToSingle",[function(){return{require:"ngModel",restrict:"A",link:function(e,t,o,n){n.$formatters.push(function(t){return!e.component.multiple&&Array.isArray(t)?t[0]||"":t})}}}]),app.config(["formioComponentsProvider",function(e){e.register("textfield",{title:"Text Field",template:"formio/components/textfield.html",settings:{input:!0,tableView:!0,inputType:"text",inputMask:"",label:"",key:"textField",placeholder:"",prefix:"",suffix:"",multiple:!1,defaultValue:"","protected":!1,unique:!1,persistent:!0,validate:{required:!1,minLength:"",maxLength:"",pattern:"",custom:"",customPrivate:!1}}})}]),app.run(["$templateCache","FormioUtils",function(e,t){e.put("formio/components/textfield.html",t.fieldWrap('<input type="{{ component.inputType }}" class="form-control" id="{{ component.key }}" name="{{ component.key }}" ng-disabled="readOnly" ng-model="data[component.key]" ng-model-options="{ debounce: 500 }" safe-multiple-to-single ng-required="component.validate.required" ng-minlength="component.validate.minLength" ng-maxlength="component.validate.maxLength" custom-validator="component.validate.custom" placeholder="{{ component.placeholder }}" formio-input-mask="{{ component.inputMask }}">'))}]),app.config(["formioComponentsProvider",function(e){e.register("address",{title:"Address",template:function(e){return e.component.multiple?"formio/components/address-multiple.html":"formio/components/address.html"},controller:function(e,t,o){t.address={},t.addresses=[],t.refreshAddress=function(e){var n={address:e,sensor:!1};return o.get("https://maps.googleapis.com/maps/api/geocode/json",{disableJWT:!0,params:n,headers:{Authorization:void 0,Pragma:void 0,"Cache-Control":void 0}}).then(function(e){t.addresses=e.data.results})}},tableView:function(e){return e?e.formatted_address:""},settings:{input:!0,tableView:!0,label:"",key:"addressField",placeholder:"",multiple:!1,"protected":!1,unique:!1,persistent:!0,validate:{required:!1}}})}]),app.run(["$templateCache",function(e){e.put("formio/components/address.html",'<label ng-if="component.label" for="{{ component.key }}" ng-class="{\'field-required\': component.validate.required}">{{ component.label }}</label><span ng-if="!component.label && component.validate.required" class="glyphicon glyphicon-asterisk form-control-feedback field-required-inline" aria-hidden="true"></span><ui-select ng-model="data[component.key]" safe-multiple-to-single ng-disabled="readOnly" ng-required="component.validate.required" id="{{ component.key }}" theme="bootstrap"><ui-select-match placeholder="{{ component.placeholder }}">{{$item.formatted_address || $select.selected.formatted_address}}</ui-select-match><ui-select-choices repeat="address in addresses track by $index" refresh="refreshAddress($select.search)" refresh-delay="500"><div ng-bind-html="address.formatted_address | highlight: $select.search"></div></ui-select-choices></ui-select>'),e.put("formio/components/address-multiple.html",e.get("formio/components/address.html").replace("<ui-select","<ui-select multiple"))}]),app.config(["formioComponentsProvider",function(e){e.register("button",{title:"Button",template:"formio/components/button.html",settings:{input:!0,label:"Submit",tableView:!1,key:"submit",size:"md",leftIcon:"",rightIcon:"",block:!1,action:"submit",disableOnInvalid:!0,theme:"primary"},controller:function(e,t){t.onClick=function(){switch(e.action){case"submit":return;case"reset":t.resetForm()}}}})}]),app.run(["$templateCache",function(e){e.put("formio/components/button.html",'<button type="{{component.action == \'submit\' ? \'submit\' : \'button\'}}"ng-class="{\'btn-block\': component.block}"class="btn btn-{{ component.theme }} btn-{{ component.size }}"ng-disabled="readOnly || form.submitting || (component.disableOnInvalid && form.$invalid)"ng-click="onClick()"><span ng-if="component.leftIcon" class="{{ component.leftIcon }}" aria-hidden="true"></span><span ng-if="component.leftIcon && component.label">&nbsp;</span>{{ component.label }}<span ng-if="component.rightIcon && component.label">&nbsp;</span><span ng-if="component.rightIcon" class="{{ component.rightIcon }}" aria-hidden="true"></span> <i ng-if="component.action == \'submit\' && form.submitting" class="glyphicon glyphicon-refresh glyphicon-spin"></i></button>')}]),app.config(["formioComponentsProvider",function(e){e.register("checkbox",{title:"Check Box",template:"formio/components/checkbox.html",settings:{input:!0,inputType:"checkbox",tableView:!0,hideLabel:!0,label:"",key:"checkboxField",prefix:"",suffix:"",defaultValue:!1,"protected":!1,persistent:!0,validate:{required:!1}}})}]),app.run(["$templateCache","FormioUtils",function(e,t){e.put("formio/components/checkbox.html",t.fieldWrap('<div class="checkbox"><label for={{ component.key }} ng-class="{\'field-required\': component.validate.required}"><input type="{{ component.inputType }}" id="{{ component.key }}" name="{{ component.key }}" value="{{ component.key }}" ng-disabled="readOnly" ng-model="data[component.key]" ng-required="component.validate.required">{{ component.label }}</label></div>'))}]),app.config(["formioComponentsProvider",function(e){e.register("columns",{title:"Columns",template:"formio/components/columns.html",group:"layout",settings:{input:!1,columns:[{components:[]},{components:[]}]}})}]),app.run(["$templateCache",function(e){e.put("formio/components/columns.html",'<div class="row"><div class="col-xs-6" ng-repeat="column in component.columns"><formio-component ng-repeat="component in column.components" ng-if="componentFound(component)" component="component" data="data" formio="formio" read-only="readOnly"></formio-component></div></div>')}]),app.config(["formioComponentsProvider",function(e){e.register("content",{title:"Content",template:"formio/components/content.html",settings:{input:!1,html:""}})}]),app.run(["$templateCache",function(e){e.put("formio/components/content.html",'<div ng-bind-html="component.html | safehtml"></div>')}]),app.config(["formioComponentsProvider",function(e){e.register("datetime",{title:"Date / Time",template:"formio/components/datetime.html",settings:{input:!0,tableView:!0,label:"",key:"datetimeField",placeholder:"",format:"yyyy-MM-dd HH:mm",enableDate:!0,enableTime:!0,minDate:null,maxDate:null,datepickerMode:"day",datePicker:{showWeeks:!0,startingDay:0,initDate:"",minMode:"day",maxMode:"year",yearRange:"20"},timePicker:{hourStep:1,minuteStep:1,showMeridian:!0,readonlyInput:!1,mousewheel:!0,arrowkeys:!0},"protected":!1,persistent:!0,validate:{required:!1,custom:""}}})}]),app.run(["$templateCache","FormioUtils",function(e,t){e.put("formio/components/datetime.html",t.fieldWrap('<div class="input-group"><input type="text" class="form-control" ng-focus="calendarOpen = true" ng-click="calendarOpen = true" ng-init="calendarOpen = false" ng-disabled="readOnly" ng-required="component.validate.required" is-open="calendarOpen" datetime-picker="{{ component.format }}" min-date="component.minDate" max-date="component.maxDate" datepicker-mode="component.datepickerMode" enable-date="component.enableDate" enable-time="component.enableTime" ng-model="data[component.key]" placeholder="{{ component.placeholder }}" datepicker-options="component.datePicker" timepicker-options="component.timePicker" /><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="calendarOpen = true"><i ng-if="component.enableDate" class="glyphicon glyphicon-calendar"></i><i ng-if="!component.enableDate" class="glyphicon glyphicon-time"></i></button></span></div>'))}]),app.config(["formioComponentsProvider",function(e){e.register("email",{title:"Email",template:"formio/components/textfield.html",settings:{input:!0,tableView:!0,inputType:"email",label:"",key:"emailField",placeholder:"",prefix:"",suffix:"",defaultValue:"","protected":!1,unique:!1,persistent:!0}})}]),app.config(["formioComponentsProvider",function(e){e.register("fieldset",{title:"Field Set",template:"formio/components/fieldset.html",settings:{input:!1,tableView:!0,legend:"",components:[]}})}]),app.run(["$templateCache",function(e){e.put("formio/components/fieldset.html",'<fieldset><legend ng-if="component.legend">{{ component.legend }}</legend><formio-component ng-repeat="component in component.components" ng-if="componentFound(component)" component="component" data="data" formio="formio" read-only="readOnly"></formio-component></fieldset>')}]),app.config(["formioComponentsProvider",function(e){e.register("hidden",{title:"Hidden",template:"formio/components/hidden.html",settings:{input:!0,tableView:!0,key:"hiddenField",label:"","protected":!1,unique:!1,persistent:!0}})}]),app.run(["$templateCache",function(e){e.put("formio/components/hidden.html",'<input type="hidden" id="{{ component.key }}" name="{{ component.key }}" ng-model="data[component.key]">')}]),app.config(["formioComponentsProvider",function(e){e.register("number",{title:"Number",template:"formio/components/number.html",settings:{input:!0,tableView:!0,inputType:"number",label:"",key:"numberField",placeholder:"",prefix:"",suffix:"",defaultValue:"",validate:{required:!1,min:"",max:"",step:"any",integer:"",multiple:"",custom:""}}})}]),app.run(["$templateCache","FormioUtils",function(e,t){e.put("formio/components/number.html",t.fieldWrap('<input type="{{ component.inputType }}" class="form-control" id="{{ component.key }}" name="{{ component.key }}" ng-model="data[component.key]" ng-required="component.validate.required" ng-disabled="readOnly" safe-multiple-to-single min="{{ component.validate.min }}" max="{{ component.validate.max }}" step="{{ component.validate.step }}" placeholder="{{ component.placeholder }}" custom-validator="component.validate.custom" formio-input-mask="{{ component.inputMask }}">'))}]),app.config(["formioComponentsProvider",function(e){e.register("page",{template:"formio/components/page.html",settings:{input:!1,components:[]}})}]),app.run(["$templateCache",function(e){e.put("formio/components/page.html",'<formio-component ng-repeat="component in component.components" ng-if="componentFound(component)" component="component" data="data" formio="formio"></formio-component>')}]),app.config(["formioComponentsProvider",function(e){e.register("panel",{title:"Panel",template:"formio/components/panel.html",group:"layout",settings:{input:!1,title:"",theme:"default",components:[]}})}]),app.run(["$templateCache",function(e){e.put("formio/components/panel.html",'<div class="panel panel-{{ component.theme }}"><div ng-if="component.title" class="panel-heading"><h3 class="panel-title">{{ component.title }}</h3></div><div class="panel-body"><formio-component ng-repeat="component in component.components" ng-if="componentFound(component)" component="component" data="data" formio="formio" read-only="readOnly"></formio-component></div></div>')}]),app.config(["formioComponentsProvider",function(e){e.register("password",{title:"Password",template:"formio/components/textfield.html",tableView:function(){return"--- PROTECTED ---"},settings:{input:!0,tableView:!1,inputType:"password",label:"",key:"passwordField",placeholder:"",prefix:"",suffix:"","protected":!0,persistent:!0}})}]),app.config(["formioComponentsProvider",function(e){e.register("phoneNumber",{title:"Phone Number",template:"formio/components/textfield.html",settings:{input:!0,tableView:!0,inputMask:"(999) 999-9999",label:"",key:"phonenumberField",
placeholder:"",prefix:"",suffix:"",multiple:!1,"protected":!1,unique:!1,persistent:!0,validate:{required:!1}}})}]),app.config(["formioComponentsProvider",function(e){e.register("radio",{title:"Radio",template:"formio/components/radio.html",settings:{input:!0,tableView:!0,inputType:"radio",label:"",key:"radioField",values:[],defaultValue:"","protected":!1,persistent:!0,validate:{required:!1,custom:"",customPrivate:!1}}})}]),app.run(["$templateCache","FormioUtils",function(e,t){e.put("formio/components/radio.html",t.fieldWrap('<div class="radio" ng-repeat="v in component.values track by $index"><label class="control-label" for="value"><input type="{{ component.inputType }}" id="{{ v.value }}" name="{{ component.key }}" value="{{ v.value }}" ng-model="data[component.key]" ng-required="component.validate.required" ng-disabled="readOnly"custom-validator="component.validate.custom">{{ v.label }}</label></div>'))}]),app.config(["formioComponentsProvider",function(e){e.register("resource",{title:"Resource",tableView:function(e){return e?e._id:""},template:function(e){return e.component.multiple?"formio/components/resource-multiple.html":"formio/components/resource.html"},controller:function(e,t,o,n){if(t.selectItems=[],e.multiple&&(e.defaultValue=[]),e.resource){var i=new n(t.formio.projectUrl+"/form/"+e.resource),r={};if(e.selectFields&&(r.select=e.selectFields),e.searchExpression&&e.searchFields){var a=new RegExp(e.searchExpression);t.refreshSubmissions=function(t){if(!t)return[];var o=t.match(a),n=!1;o&&o.length>1&&angular.forEach(e.searchFields,function(e,t){o.length>t+1&&o[t+1]&&(r[e]=o[t+1],n=!0)}),!n}}else t.refreshSubmissions=function(){};i.loadSubmissions({params:r}).then(function(e){t.selectItems=e||[]})}},settings:{input:!0,tableView:!0,label:"",key:"resourceField",placeholder:"",resource:"",defaultValue:"",template:"<span>{{ item.data }}</span>",selectFields:"",searchExpression:"",searchFields:"",multiple:!1,refresh:!1,refreshDelay:0,validate:{required:!1}}})}]),app.run(["$templateCache",function(e){e.put("formio/components/resource.html",'<label ng-if="component.label" for="{{ component.key }}" class="control-label" ng-class="{\'field-required\': component.validate.required}">{{ component.label }}</label><span ng-if="!component.label && component.validate.required" class="glyphicon glyphicon-asterisk form-control-feedback field-required-inline" aria-hidden="true"></span><ui-select ui-select-required safe-multiple-to-single ui-select-open-on-focus ng-model="data[component.key]" ng-disabled="readOnly" ng-required="component.validate.required" id="{{ component.key }}" name="{{ component.key }}" theme="bootstrap"><ui-select-match placeholder="{{ component.placeholder }}"><formio-select-item template="component.template" item="$item || $select.selected" select="$select"></formio-select-item></ui-select-match><ui-select-choices repeat="item in selectItems | filter: $select.search" refresh="refreshSubmissions($select.search)" refresh-delay="1000"><formio-select-item template="component.template" item="item" select="$select"></formio-select-item></ui-select-choices></ui-select><formio-errors></formio-errors>'),e.put("formio/components/resource-multiple.html",e.get("formio/components/resource.html").replace("<ui-select","<ui-select multiple"))}]),app.directive("formioSelectItem",["$compile",function(e){return{restrict:"E",scope:{template:"=",item:"=",select:"="},link:function(t,o){t.template&&o.html(e(angular.element(t.template))(t))}}}]),app.directive("uiSelectRequired",function(){return{require:"ngModel",link:function(e,t,o,n){var i=n.$isEmpty;n.$isEmpty=function(e){return Array.isArray(e)&&0===e.length||i(e)}}}}),app.directive("uiSelectOpenOnFocus",["$timeout",function(e){return{require:"uiSelect",restrict:"A",link:function(t,o,n,i){var r=!1;angular.element(i.focusser).on("focus",function(){r||i.activate()}),t.$on("uis:close",function(){r=!0,e(function(){r=!1})})}}}]),app.config(["formioComponentsProvider",function(e){e.register("select",{title:"Select",template:function(e){return e.component.multiple?"formio/components/select-multiple.html":"formio/components/select.html"},controller:function(e,t,o,n){t.nowrap=!0,t.selectItems=[];var i=t.component.valueProperty;switch(t.getSelectItem=function(t){return t?"values"===e.dataSrc?t.value:i?t[i]:t:""},e.multiple&&(e.defaultValue=[]),e.dataSrc){case"values":t.selectItems=e.data.values;break;case"json":try{t.selectItems=angular.fromJson(e.data.json)}catch(r){t.selectItems=[]}break;case"url":var a={cache:!0};"/"===e.data.url.substr(0,1)&&(e.data.url=n.baseUrl+e.data.url),-1===e.data.url.indexOf(n.baseUrl)&&(a={disableJWT:!0,headers:{Authorization:void 0,Pragma:void 0,"Cache-Control":void 0}}),o.get(e.data.url,a).success(function(e){t.selectItems=e});break;default:t.selectItems=[]}},settings:{input:!0,tableView:!0,label:"",key:"selectField",placeholder:"",data:{values:[{value:"value1",label:"Value 1"},{value:"value2",label:"Value 2"}],json:"",url:""},dataSrc:"values",valueProperty:"",defaultValue:"",template:"<span>{{ item.label }}</span>",multiple:!1,refresh:!1,refreshDelay:0,"protected":!1,unique:!1,persistent:!0,validate:{required:!1}}})}]),app.run(["$templateCache",function(e){e.put("formio/components/select.html",'<label ng-if="component.label" for="{{ component.key }}" class="control-label" ng-class="{\'field-required\': component.validate.required}">{{ component.label }}</label><span ng-if="!component.label && component.validate.required" class="glyphicon glyphicon-asterisk form-control-feedback field-required-inline" aria-hidden="true"></span><ui-select ui-select-required ui-select-open-on-focus ng-model="data[component.key]" safe-multiple-to-single name="{{ component.key }}" ng-disabled="readOnly" ng-required="component.validate.required" id="{{ component.key }}" theme="bootstrap"><ui-select-match placeholder="{{ component.placeholder }}"><formio-select-item template="component.template" item="$item || $select.selected" select="$select"></formio-select-item></ui-select-match><ui-select-choices repeat="getSelectItem(item) as item in selectItems | filter: $select.search"><formio-select-item template="component.template" item="item" select="$select"></formio-select-item></ui-select-choices></ui-select><formio-errors></formio-errors>'),e.put("formio/components/select-multiple.html",e.get("formio/components/select.html").replace("<ui-select","<ui-select multiple"))}]),app.config(["formioComponentsProvider",function(e){e.register("signature",{title:"Signature",template:"formio/components/signature.html",tableView:function(e){return e?"Yes":"No"},settings:{input:!0,tableView:!0,label:"",key:"signature",placeholder:"",footer:"Sign above",width:"100%",height:"150",penColor:"black",backgroundColor:"rgb(245,245,235)",minWidth:"0.5",maxWidth:"2.5",validate:{required:!1}}})}]),app.directive("signature",function(){return{restrict:"A",scope:{component:"="},require:"?ngModel",link:function(e,t,o,n){function i(){e.component.validate.required&&a.isEmpty()?n.$setViewValue(""):n.$setViewValue(a.toDataURL())}if(n){e.component.label="Signature",e.component.hideLabel=!0;var r=function(o){if("%"===e.component[o].slice(-1)){var n=parseFloat(e.component[o].slice(0,-1))/100;t[0][o]=t.parent()[o]()*n}else t[0][o]=parseInt(e.component[o],10),e.component[o]+="px"};r("width"),r("height");var a=new SignaturePad(t[0],{minWidth:e.component.minWidth,maxWidth:e.component.maxWidth,penColor:e.component.penColor,backgroundColor:e.component.backgroundColor});e.$watch("component.penColor",function(e){a.penColor=e}),e.$watch("component.backgroundColor",function(e){a.backgroundColor=e,a.clear()}),e.component.clearSignature=function(){a.clear(),i()},t.css({"border-radius":"4px","box-shadow":"0 0 5px rgba(0, 0, 0, 0.02) inset",border:"1px solid #f4f4f4"}),n.$render=function(){a.fromDataURL(n.$viewValue)},a.onEnd=function(){e.$evalAsync(i)},e.component.validate.required||i()}}}}),app.run(["$templateCache","FormioUtils",function(e,t){e.put("formio/components/signature.html",t.fieldWrap('<img ng-if="readOnly" ng-attr-src="{{data[component.key]}}" src="" /><div ng-if="!readOnly" style="width: {{ component.width }}; height: {{ component.height }};"><a class="btn btn-xs btn-default" style="position:absolute; left: 0; top: 0; z-index: 1000" ng-click="component.clearSignature()"><span class="glyphicon glyphicon-refresh"></span></a><canvas signature component="component" name="{{ component.key }}" ng-model="data[component.key]" ng-required="component.validate.required"></canvas><div class="formio-signature-footer" style="text-align: center;color:#C3C3C3;" ng-class="{\'field-required\': component.validate.required}">{{ component.footer }}</div></div>'))}]),app.config(["formioComponentsProvider",function(e){e.register("textarea",{title:"Text Area",template:"formio/components/textarea.html",settings:{input:!0,tableView:!0,label:"",key:"textareaField",placeholder:"",prefix:"",suffix:"",rows:3,multiple:!1,defaultValue:"",validate:{required:!1,minLength:"",maxLength:"",pattern:"",custom:""}}})}]),app.run(["$templateCache","FormioUtils",function(e,t){e.put("formio/components/textarea.html",t.fieldWrap('<textarea class="form-control" ng-model="data[component.key]" ng-disabled="readOnly" ng-required="component.validate.required" safe-multiple-to-single id="{{ component.key }}" placeholder="{{ component.placeholder }}" custom-validator="component.validate.custom" rows="{{ component.rows }}"></textarea>'))}]),app.config(["formioComponentsProvider",function(e){e.register("well",{title:"Well",template:"formio/components/well.html",group:"layout",settings:{input:!1,components:[]}})}]),app.run(["$templateCache",function(e){e.put("formio/components/well.html",'<div class="well"><formio-component ng-repeat="component in component.components" ng-if="componentFound(component)" component="component" data="data" formio="formio" read-only="readOnly"></formio-component></div>')}])}();